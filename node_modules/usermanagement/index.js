const stripe = require('stripe')('sk_test_51Js6TqI2eoRjhsHUBUM3hgIAbALchbSeFa3mpIiYKh9q4L4IofzBmuWyXNu7NdPUQH3wCvBGRSfYPQq5Vr2Z2vri003iNj621y');
const {Deta} = require('deta')
const deta = Deta('b0bj02xu_yJxh7WpXiJEcGiZkc2GZtW4aJ59UcMs8');
const crypto = require('crypto')
const customerDatabase = deta.Base("Customers")


exports.newUser = function(theEmail, theAddress, theName,thePassword){
    return new Promise((resolve) =>{
        const customer = await stripe.customers.create({
            address: theAddress,
            email: theEmail,
            name: theName,
            shipping: theAddress,
        });
        var Data = {"Name":theName, "Address":theAddress,"Email":theEmail, "Password":thePassword, "Cart":null }
        await customerDatabase(Data, customer.id)
        resolve(customer)
    })
}